# Offender Segment

```{r, echo=FALSE}
knitr::opts_chunk$set(
  echo    = FALSE,
  warning = FALSE,
  error   = FALSE,
  message = FALSE
)
```

```{r,  results='hide'}
load("data/nibrs_offender_segment_segment_2019.rda")
offender <- nibrs_offender_segment_segment_2019
rm(nibrs_offender_segment_segment_2019)
gc()
```


As might be expected, the Offender Segment provides information about who the offender is for each incident, though this is limited to only demographic variables. So we know the age, sex, and race of each offender but nothing else. This means that important variables such as criminal history, ethnicity, socioeconomic status, and motive are missing. In the Victim Segment we learn about the relationship between the victim and offender, and in the Offense Segment we learn which weapon (if any) the offender used. So there is some other data on the offender in other segments but it's quite limited. This data has one row per offender so incidents with multiple offenders have multiple rows. In cases where there is no information about the offender there will be a single row where all of the offender variables will be "unknown." In these cases having a single row for the offender is merely a placeholder and doesn't necessarily mean that there was only one offender for that incident. However, there's no indicator for when this is a placeholder and when there was actually one offender but whose demographic info is unknown.

## Important variables

### Demographics

#### Age

```{r offenderAge, fig.cap = "The age of all offenders reported in the 2019 NIBRS data. Approximately 39% of offenders have an unknown age are an not shown in the figure."}
offender$age_of_offender[offender$age_of_offender %in% "over 98 years old"] <- 99
offender$age_of_offender[offender$age_of_offender %in% "unknown"] <- NA
offender$age_of_offender <- as.numeric(offender$age_of_offender)
make_stat_count_plots(offender, "age_of_offender", count = FALSE, ylab = "% of Offenders") + xlab("Age")
```


#### Sex

```{r offenderSex, fig.cap = "The sex of all offenders reported in the 2019 NIBRS data."}
offender$sex_of_offender[offender$sex_of_offender == "m"] <- "male"
offender$sex_of_offender[is.na(offender$sex_of_offender)] <- "unknown"
offender %>%
  mutate(sex_of_offender = capitalize_words(sex_of_offender)) %>%
crimeutils::make_barplots("sex_of_offender", count = FALSE, ylab = "% of Offenders") +
  ggplot2::scale_y_continuous(labels = scales::percent)
```


#### Race

```{r offenderRace, fig.cap = "The race of all offenders reported in the 2019 NIBRS data."}
offender$race_of_offender[offender$race_of_offender %in% "native hawaiian or other pacific islander"] <- "native hawaiian/pacific islander"
offender$race_of_offender[is.na(offender$race_of_offender)] <- "unknown"
offender %>%
  mutate(race_of_offender = capitalize_words(race_of_offender)) %>%
crimeutils::make_barplots("race_of_offender", count = FALSE, ylab = "% of Offenders") +
  ggplot2::scale_y_continuous(labels = scales::percent)
```

